<svg width="500" height="500" xmlns="http://www.w3.org/2000/svg">

  <!-- Clipping mask -->
  <defs>
    <clipPath id="castleClip" clipPathUnits="objectBoundingBox">
      <path d="M0 .8 H1 V.95 C1 .75 0 .5 0 0 Z"/>
    </clipPath>
    <mask id="moatMask" x="46%" y="0%" width="20%" height="100%">
      <circle cx="1" cy=".3" r=".1" fill="white"/>
      <ellipse cx="1" cy=".5" rx=".18" ry=".05" fill="black"/>
    </mask>
  </defs>

  <!-- Castle -->
  <rect x="20%" y="70%" width="60%" height="30%" fill="#C0C0C0" clipPath="url(#castleClip)"/>

  <!-- Towers -->
  <rect x="15%" y="55%" width="10%" height="45%" fill="#A9A9A9"/>
  <rect x="75%" y="55%" width="10%" height="45%" fill="#A9A9A9"/>

  <!-- Roofs -->
  <polygon points="20%,80% 60%,80% 40%,90%" fill="#8B4513"/>
  <polygon points="80%,80% 100%,80% 90%,90%" fill="#8B4513"/>

  <!-- Windows -->
  <circle cx="25%" cy="72%" r="3%" fill="black"/>
  <circle cx="75%" cy="72%" r="3%" fill="black"/>

  <!-- Moat -->
  <ellipse cx="60%" cy="90%" rx="20%" ry="5%" fill="#48CAE4" mask="url(#moatMask)"/>

</svg>